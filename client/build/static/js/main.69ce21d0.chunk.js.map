{"version":3,"sources":["Main.js","App.js","index.js"],"names":["Main","participants","facebook","senderName","alreadyVoted","anonymous","click","useState","already","setAlready","error","setError","override","setOverride","secureData","setSecureData","total","setTotal","handler","requestingPlayerName","a","Axios","post","sender","then","res","data","voted","catch","useEffect","width","window","innerWidth","final","innerHeight","document","querySelector","offsetHeight","style","height","boxSizing","paddingTop","paddingBottom","loadSecure","get","tmp","users","map","el","length","Container","className","backgroundImage","src","textAlign","color","onClick","prompt","margin","padding","overflow","frameBorder","i","name","key","img","team","div","initial","opacity","animate","transition","duration","exit","id","marginBottom","parts","votes","fontWeight","marginTop","border","cursor","styled","App","setToken","setId","setName","setParticipants","setAlreadyVoted","loaded","setLoaded","setAnonymous","location","href","includes","localStorage","getItem","accessToken","userID","axios","status","alert","person","err","removeItem","reload","go","FB","login","response","authResponse","setItem","scope","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.69ce21d0.chunk.js","sourcesContent":["import Axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {AnimatePresence, motion} from 'framer-motion';\r\nimport {FaFacebookF} from 'react-icons/fa'\r\nimport {AiOutlineClose} from 'react-icons/ai'\r\nimport {GiClick} from 'react-icons/gi'\r\n\r\nconst Main = ({ participants, facebook, senderName, alreadyVoted, anonymous, click }) => {\r\n\r\n    const [already, setAlready] = useState(alreadyVoted);\r\n    const [error, setError] = useState('');\r\n    const [override, setOverride] = useState(false);\r\n    const [secureData, setSecureData] = useState({});\r\n    const [total, setTotal] = useState(null)\r\n\r\n    const handler = async (requestingPlayerName) => {\r\n        if(facebook, senderName && !anonymous){\r\n            Axios.post('/vote', {requestingPlayerName, facebook, sender: senderName})\r\n                .then((res)=>{\r\n                    setError('Амжилттай саналаа өглөө!');\r\n                    setAlready(res.data.voted);\r\n                })\r\n                .catch(()=>setError('Дахин санал өгөх боломжгүй!'))\r\n        }\r\n        else{\r\n            setError('Саналаа өгөхийн тулд нэвтрэх шаардлагатай! (Дахин баталгаажуулах)');\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        let width = window.innerWidth\r\n        let height = window.innerHeight\r\n        let top = document.querySelector('.top').offsetHeight;\r\n        let bot = document.querySelector('.bottom').offsetHeight;\r\n        let final = height - top - bot;\r\n        document.querySelector('iframe').style.width = width + 'px';\r\n        document.querySelector('iframe').style.height = final + 'px';\r\n        document.querySelector('iframe').style.boxSizing = 'border-box';\r\n        document.querySelector('iframe').style.paddingTop = '50px';\r\n        document.querySelector('iframe').style.paddingBottom = '50px';\r\n        \r\n    },[])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const securityHandler = () => {\r\n        let pass = window.prompt('.');\r\n        pass === \"Soccer91270817\" && setOverride(true);\r\n    }\r\n\r\n    const loadSecure = async () => {\r\n        let res = await Axios.get('/get-auth-no');\r\n        let tmp = 0\r\n        res.data && res.data.users && res.data.users.map(el=>el.voted && el.voted.length > 1 && tmp++);\r\n        setTotal(tmp);\r\n        setSecureData(res.data)\r\n    }\r\n\r\n    const handleCloseSecurity = () => {\r\n        setOverride(false);\r\n    }\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <div className=\"top\" style={{backgroundImage: `linear-gradient(45deg, #002ebf, #2891eb)`}}>\r\n                <div className=\"imgcon\">\r\n                <img src={'https://i.imgur.com/t9rOsAW.png'} />\r\n                <img src={'https://i.imgur.com/uHawS7U.png'} />\r\n                </div>\r\n                \r\n                <h2 style={{textAlign:'center',color:'white'}}>Үндэсний дээд лиг 2020 улиралын шилдэг гоолын санал авах хуудас</h2>\r\n                <div className=\"imgcon\">\r\n                <img style={{width:40,height:40}} src={'https://i.imgur.com/9u1POUD.png'} onClick={securityHandler} />\r\n                <img src={'https://i.imgur.com/ByZAObT.png'} />\r\n                </div>\r\n                \r\n            </div>\r\n            <div className=\"body\">\r\n                <div style={{margin:'0px', padding:'0px', overflow: 'hidden'}}>\r\n                    <iframe src=\"https://www.youtube.com/embed/Nbst6fgBkUw\" frameBorder={0} style={{overflow: 'hidden', height: '100%', width: '100%'}} height=\"100%\" width=\"100%\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"bottom\" >\r\n                {participants.map((el, i) => {\r\n                    return (\r\n                        <div className={`prt ${already === el.name && 'voted'}`} key={i + \"p\"} onClick={()=>handler(el.name)}>\r\n                            <div className=\"img\" style={{backgroundImage:`url(${el.img})`}}><div className=\"caption\">VOTED</div></div>\r\n                            <h4>{el.name}</h4>\r\n                            <p>{el.team}</p>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <AnimatePresence>\r\n                {error &&\r\n                    <motion.div initial={{opacity:0}} animate={{opacity:1, transition: {duration: 0.3}}} exit={{opacity:0}} id=\"dialog\">\r\n                        <div className=\"content\">\r\n                            <h4>{error}</h4>\r\n                            {anonymous && <div className=\"fb-con\" onClick={click}><FaFacebookF className=\"f\"/><p>Continue with Facebook</p></div>}\r\n                            {!anonymous && <div className=\"fb-con\"><FaFacebookF className=\"f\"/><p>Logged in as {senderName}</p></div>}\r\n                            <AiOutlineClose className=\"x\" onClick={()=>setError('')}/>\r\n                        </div>\r\n                    </motion.div>\r\n                }\r\n            </AnimatePresence>\r\n            <AnimatePresence>\r\n                {override &&\r\n                <motion.div initial={{opacity:0}} animate={{opacity:1, transition: {duration: 0.3}}} exit={{opacity:0}} id=\"dialog\" className=\"anotherDialog\">\r\n                    <div className=\"content\">\r\n                        <h4 onClick={loadSecure} style={{marginBottom: 50, textAlign:'center'}}>Нийт тоглогчдийн санал харах <GiClick/></h4>\r\n                        {secureData.parts && secureData.parts.length && secureData.parts.map((el,i)=>{\r\n                            return(\r\n                                <div style={{marginBottom:10,textAlign:'center'}} key={i+'vs'}>\"{el.name}\" - {el.votes.length} саналтай байна.</div>\r\n                            )\r\n                        })}\r\n                        {secureData.users && <div style={{textAlign:'center',fontWeight:'bold',marginTop:30}}>Нийт бүртгүүлсэн хэрэглэгчдийн тоо : {secureData.users && secureData.users.length}<br/></div>}\r\n                        {total && <div style={{textAlign:'center',fontWeight:'bold',marginTop:15}}>Нийт саналаа амжилттай өгсөн хүний тоо : {total}<br/></div>}\r\n                        <div style={{marginTop:50,textAlign:'center',border:'1px solid rgba(0,0,0,0.1)', padding:15,cursor:'pointer'}} onClick={handleCloseSecurity}>Цонхыг хаах <AiOutlineClose/></div>\r\n                    </div>\r\n                </motion.div>}\r\n            </AnimatePresence>\r\n            \r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Main;\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    #dialog{\r\n        display:flex;\r\n        justify-content:center;\r\n        align-items:center;\r\n        position:absolute;\r\n        top:0;\r\n        left:0;\r\n        right:0;\r\n        bottom:0;\r\n        background:rgba(0,0,0,0.6);\r\n        .content{\r\n            position:relative;\r\n            padding:60px 5vw;\r\n            background:white;\r\n            max-width:100vw;\r\n            .fb-con{\r\n                max-width:100%;\r\n                background: rgb(59,89,152);\r\n                color: white;\r\n                padding: 10px 15px;\r\n                position: relative;\r\n                text-align: center;\r\n                margin-top:20px;\r\n                p{\r\n                    margin:0px;\r\n                    margin-left:25px;\r\n                }\r\n                .f{\r\n                    position: absolute;\r\n                    left: 15px;\r\n                    font-size:18px;\r\n                }\r\n                &:hover{\r\n                    cursor:pointer;\r\n                }\r\n            }\r\n            h4{\r\n                margin:0px;\r\n                text-align:center;\r\n            }\r\n            .x{\r\n                position:absolute;\r\n                top:15px;\r\n                right:15px;\r\n                font-size:24px;\r\n                &:hover{\r\n                    cursor:pointer;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .anotherDialog{\r\n        h4{\r\n            border:1px solid rgba(0,0,0,0.1);\r\n            padding:15px;\r\n            &:hover{\r\n                cursor:pointer;\r\n            }\r\n        }\r\n    }\r\n    .top {\r\n        width: 100%;\r\n        background: rgba(0, 0, 0, 0.1);\r\n        display:flex;\r\n        justify-content: center;\r\n        align-items:center;\r\n        img{\r\n            height:50px;\r\n            margin:0px 15px;\r\n            \r\n        }\r\n        .imgcon{\r\n            display:flex;\r\n        }\r\n    }\r\n    .body {\r\n    }\r\n    .bottom {\r\n        width: 100%;\r\n        padding: 25px;\r\n        box-sizing: border-box;\r\n        overflow-x: scroll;\r\n        overflow-y: hidden;\r\n        white-space: nowrap;\r\n        text-align: center;\r\n        border-top:1px solid rgba(0,0,0,0.2);\r\n        ${'' /* color:white; */}\r\n        .prt {\r\n            display: inline-block;\r\n            margin-right: 30px;\r\n            position:relative;\r\n            &:hover{\r\n                cursor:pointer;\r\n                .img{\r\n                    opacity:0.7;\r\n                }\r\n            }\r\n            &:last-child {\r\n                margin-right: 0px;\r\n            }\r\n            .img {\r\n                width: 100px;\r\n                height: 100px;\r\n                background-size:cover;\r\n                background-position:center center;\r\n                border-radius: 100%;\r\n                box-sizing:border-box;\r\n                border:3px solid #002ebf;\r\n                margin:0px auto;\r\n                .caption{\r\n                    line-height:100px;\r\n                    width:100%;\r\n                    height:100%;\r\n                    font-weight:bold;\r\n                    border-radius:100%;\r\n                    color:#002ebf;\r\n                    display:none;\r\n                }\r\n            }\r\n            h4 {\r\n                margin-bottom: 0px;\r\n                margin-top: 10px;\r\n            }\r\n            p {\r\n                margin-top: 4px;\r\n                margin-bottom: 0px;\r\n            }\r\n        }\r\n        .prt.voted {\r\n            .img{\r\n                border:3px solid red;\r\n                .caption{\r\n                    background:rgba(255,255,255,0.5);\r\n                    display:block;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .bottom::-webkit-scrollbar {\r\n        height:8px;\r\n    }\r\n    \r\n    .bottom::-webkit-scrollbar-track {\r\n        box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    }\r\n    \r\n    .bottom::-webkit-scrollbar-thumb {\r\n        background-color: rgb(0,46,191,0.6);\r\n        border-radius: 10px;\r\n    }\r\n    .bottom:hover::-webkit-scrollbar-thumb{\r\n        background-color: #002ebf;\r\n    }\r\n    @media only screen and (max-width: 768px){\r\n        h2{\r\n            font-size:16px;\r\n        }\r\n        .top{\r\n            img{\r\n                height:30px;\r\n            }\r\n            .imgcon{\r\n                flex-direction:column;\r\n                img{\r\n                    &:first-child{\r\n                        margin-bottom:7.5px;\r\n                        margin-top:15px;\r\n                    }\r\n                    &:last-child{\r\n                        margin-bottom:15px;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\nimport axios from 'axios'\nimport Main from \"./Main\";\n\nfunction App() {\n\n    const [token, setToken] = useState(null);\n    const [id, setId] = useState(null);\n    const [name, setName] = useState(null);\n    const [participants, setParticipants] = useState([]);\n    const [alreadyVoted, setAlreadyVoted] = useState('');\n    const [loaded, setLoaded] = useState(false);\n    const [anonymous, setAnonymous] = useState(false);\n\n    const loginWithFacebook = () => {\n        if(window.FB){\n        window.FB.login((response) => {\n            if(!response || !response.authResponse) return document.location.reload();\n            const {authResponse:{accessToken, userID}} = response\n            localStorage.setItem('acto', accessToken);\n            localStorage.setItem('usid', userID);\n            axios.post('/login-with-facebook', {accessToken, userID}).then((res)=>{\n                if(res.status !== 200) return window.alert('Нэвтрэхэд алдаа гарлаа!');\n                accessToken && setToken(accessToken);\n                userID && setId(userID);\n                res.data.person.name && setName(res.data.person.name)\n                res.data.participants && setParticipants(res.data.participants)\n                res.data.person.voted && setAlreadyVoted(res.data.person.voted);\n                setLoaded(true);\n                setLoaded(false);\n                setLoaded(true);\n                setAnonymous(null);\n                setAnonymous('');\n                setAnonymous(false);\n                // document.location.reload();\n            }).catch((err)=>{\n                localStorage.removeItem(\"acto\");\n                localStorage.removeItem(\"usid\");\n                document.location.reload();\n            });\n        },{scope: 'public_profile,email'});\n        }\n        else{\n            document.location.reload();\n        }\n    };\n\n    useEffect(()=>{\n        if(!window.location.href.includes('https')){\n            window.location.href = \"https://vote-mn.herokuapp.com/\";\n        }\n        if(localStorage.getItem('acto') && localStorage.getItem('usid')){\n            const accessToken = localStorage.getItem('acto');\n            const userID = localStorage.getItem('usid');\n            axios.post('/login-with-facebook', {accessToken, userID}).then((res)=>{\n                if(res.status !== 200) return window.alert('Нэвтрэхэд алдаа гарлаа!');\n                accessToken && setToken(accessToken);\n                userID && setId(userID);\n                res.data.person.name && setName(res.data.person.name)\n                res.data.participants && setParticipants(res.data.participants)\n                res.data.person.voted && setAlreadyVoted(res.data.person.voted);\n                setLoaded(true);\n            }).catch((err)=>{\n                localStorage.removeItem(\"acto\");\n                localStorage.removeItem(\"usid\");\n                document.location.reload();\n            });\n        }\n        else{\n            const go = async () => {\n                let res = await axios('/get-info');\n                setParticipants(res.data.participants);\n                setAnonymous(true)\n                setLoaded(true);\n            }\n            go();\n        }\n    },[])\n\n    return (\n        <div className=\"App\">\n            {loaded ? <Main click={loginWithFacebook} alreadyVoted={alreadyVoted} anonymous={anonymous} senderName={name} participants={participants} facebook={id}/> : 'Loading'}\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}