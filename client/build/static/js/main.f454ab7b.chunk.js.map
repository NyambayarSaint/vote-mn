{"version":3,"sources":["Main.js","App.js","index.js"],"names":["Main","participants","facebook","senderName","alreadyVoted","anonymous","click","useState","already","setAlready","error","setError","handler","requestingPlayerName","a","Axios","post","sender","then","res","data","voted","catch","Container","className","map","el","i","name","key","onClick","style","backgroundImage","team","div","initial","opacity","animate","transition","duration","exit","id","styled","App","setToken","setId","setName","setParticipants","setAlreadyVoted","loaded","setLoaded","setAnonymous","useEffect","localStorage","getItem","accessToken","userID","axios","status","window","alert","person","err","removeItem","document","location","reload","go","FB","login","response","authResponse","setItem","scope","ReactDOM","render","StrictMode","getElementById"],"mappings":"s8HAOA,IAkDeA,EAlDF,SAAC,GAA4E,IAA1EC,EAAyE,EAAzEA,aAAcC,EAA2D,EAA3DA,SAAUC,EAAiD,EAAjDA,WAAYC,EAAqC,EAArCA,aAAcC,EAAuB,EAAvBA,UAAWC,EAAY,EAAZA,MAAY,EAEvDC,mBAASH,GAF8C,mBAE9EI,EAF8E,KAErEC,EAFqE,OAG3DF,mBAAS,IAHkD,mBAG9EG,EAH8E,KAGvEC,EAHuE,KAK/EC,EAAO,uCAAG,WAAOC,GAAP,SAAAC,EAAA,sDACCX,IAAeE,EACxBU,IAAMC,KAAK,QAAS,CAACH,uBAAsBX,WAAUe,OAAQd,IACxDe,MAAK,SAACC,GACHR,EAAS,qIACTF,EAAWU,EAAIC,KAAKC,UAEvBC,OAAM,kBAAIX,EAAS,qJAGxBA,EAAS,uOAVD,2CAAH,sDAcb,OACI,kBAACY,EAAD,KACI,yBAAKC,UAAU,QACf,yBAAKA,UAAU,QAAf,QACA,yBAAKA,UAAU,UACVvB,EAAawB,KAAI,SAACC,EAAIC,GACnB,OACI,yBAAKH,UAAS,cAAShB,IAAYkB,EAAGE,MAAQ,SAAWC,IAAKF,EAAI,IAAKG,QAAS,kBAAIlB,EAAQc,EAAGE,QAC3F,yBAAKJ,UAAU,MAAMO,MAAO,CAACC,gBAAgB,mHAAmH,yBAAKR,UAAU,WAAf,UAChK,4BAAKE,EAAGE,MACR,2BAAIF,EAAGO,WAKvB,kBAAC,IAAD,KACKvB,GACG,kBAAC,IAAOwB,IAAR,CAAYC,QAAS,CAACC,QAAQ,GAAIC,QAAS,CAACD,QAAQ,EAAGE,WAAY,CAACC,SAAU,KAAOC,KAAM,CAACJ,QAAQ,GAAIK,GAAG,UACvG,yBAAKjB,UAAU,WACX,4BAAKd,GACJL,GAAa,yBAAKmB,UAAU,SAASM,QAASxB,GAAO,kBAAC,IAAD,CAAakB,UAAU,MAAK,uDAChFnB,GAAa,yBAAKmB,UAAU,UAAS,kBAAC,IAAD,CAAaA,UAAU,MAAK,2CAAiBrB,IACpF,kBAAC,IAAD,CAAgBqB,UAAU,IAAIM,QAAS,kBAAInB,EAAS,YAW1EY,EAAYmB,IAAOR,IAAV,KCsBAS,MA7Ef,WAAgB,IAAD,EAEepC,mBAAS,MAFxB,mBAEGqC,GAFH,aAGSrC,mBAAS,MAHlB,mBAGJkC,EAHI,KAGAI,EAHA,OAIatC,mBAAS,MAJtB,mBAIJqB,EAJI,KAIEkB,EAJF,OAK6BvC,mBAAS,IALtC,mBAKJN,EALI,KAKU8C,EALV,OAM6BxC,mBAAS,IANtC,mBAMJH,EANI,KAMU4C,EANV,OAOiBzC,oBAAS,GAP1B,mBAOJ0C,EAPI,KAOIC,EAPJ,OAQuB3C,oBAAS,GARhC,mBAQJF,EARI,KAQO8C,EARP,KAsEX,OA7BAC,qBAAU,WACN,GAAGC,aAAaC,QAAQ,SAAWD,aAAaC,QAAQ,QAAQ,CAC5D,IAAMC,EAAcF,aAAaC,QAAQ,QACnCE,EAASH,aAAaC,QAAQ,QACpCG,IAAMzC,KAAK,uBAAwB,CAACuC,cAAaC,WAAStC,MAAK,SAACC,GAC5D,GAAkB,MAAfA,EAAIuC,OAAgB,OAAOC,OAAOC,MAAM,+HAC3CL,GAAeX,EAASW,GACxBC,GAAUX,EAAMW,GAChBrC,EAAIC,KAAKyC,OAAOjC,MAAQkB,EAAQ3B,EAAIC,KAAKyC,OAAOjC,MAChDT,EAAIC,KAAKnB,cAAgB8C,EAAgB5B,EAAIC,KAAKnB,cAClDkB,EAAIC,KAAKyC,OAAOxC,OAAS2B,EAAgB7B,EAAIC,KAAKyC,OAAOxC,OACzD6B,GAAU,MACX5B,OAAM,SAACwC,GACNT,aAAaU,WAAW,QACxBV,aAAaU,WAAW,QACxBC,SAASC,SAASC,gBAGtB,EACQ,uCAAG,4BAAApD,EAAA,sEACS2C,IAAM,aADf,OACHtC,EADG,OAEP4B,EAAgB5B,EAAIC,KAAKnB,cACzBkD,GAAa,GACbD,GAAU,GAJH,2CAAH,qDAMRiB,MAEN,IAGE,yBAAK3C,UAAU,OACVyB,EAAS,kBAAC,EAAD,CAAM3C,MA9DE,WACnBqD,OAAOS,GACVT,OAAOS,GAAGC,OAAM,SAACC,GACb,IAAIA,IAAaA,EAASC,aAAc,OAAOP,SAASC,SAASC,SADvC,MAEmBI,EAAtCC,aAAchB,EAFK,EAELA,YAAaC,EAFR,EAEQA,OAClCH,aAAamB,QAAQ,OAAQjB,GAC7BF,aAAamB,QAAQ,OAAQhB,GAC7BC,IAAMzC,KAAK,uBAAwB,CAACuC,cAAaC,WAAStC,MAAK,SAACC,GAC5D,GAAkB,MAAfA,EAAIuC,OAAgB,OAAOC,OAAOC,MAAM,+HAC3CL,GAAeX,EAASW,GACxBC,GAAUX,EAAMW,GAChBrC,EAAIC,KAAKyC,OAAOjC,MAAQkB,EAAQ3B,EAAIC,KAAKyC,OAAOjC,MAChDT,EAAIC,KAAKnB,cAAgB8C,EAAgB5B,EAAIC,KAAKnB,cAClDkB,EAAIC,KAAKyC,OAAOxC,OAAS2B,EAAgB7B,EAAIC,KAAKyC,OAAOxC,OACzD6B,GAAU,GACVA,GAAU,GACVA,GAAU,GACVC,EAAa,SAEd7B,OAAM,SAACwC,GACNT,aAAaU,WAAW,QACxBV,aAAaU,WAAW,QACxBC,SAASC,SAASC,cAExB,CAACO,MAAO,yBAGNT,SAASC,SAASC,UAmCwB9D,aAAcA,EAAcC,UAAWA,EAAWF,WAAYyB,EAAM3B,aAAcA,EAAcC,SAAUuC,IAAQ,Y,MCtExKiC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFZ,SAASa,eAAe,W","file":"static/js/main.f454ab7b.chunk.js","sourcesContent":["import Axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {AnimatePresence, motion} from 'framer-motion';\r\nimport {FaFacebookF} from 'react-icons/fa'\r\nimport {AiOutlineClose} from 'react-icons/ai'\r\n\r\nconst Main = ({ participants, facebook, senderName, alreadyVoted, anonymous, click }) => {\r\n\r\n    const [already, setAlready] = useState(alreadyVoted);\r\n    const [error, setError] = useState('')\r\n\r\n    const handler = async (requestingPlayerName) => {\r\n        if(facebook, senderName && !anonymous){\r\n            Axios.post('/vote', {requestingPlayerName, facebook, sender: senderName})\r\n                .then((res)=>{\r\n                    setError('Амжилттай саналаа өглөө!');\r\n                    setAlready(res.data.voted);\r\n                })\r\n                .catch(()=>setError('Дахин санал өгөх боломжгүй!'))\r\n        }\r\n        else{\r\n            setError('Саналаа өгөхийн тулд нэвтрэх шаардлагатай!');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <div className=\"top\"></div>\r\n            <div className=\"body\">hehe</div>\r\n            <div className=\"bottom\">\r\n                {participants.map((el, i) => {\r\n                    return (\r\n                        <div className={`prt ${already === el.name && 'voted'}`} key={i + \"p\"} onClick={()=>handler(el.name)}>\r\n                            <div className=\"img\" style={{backgroundImage:`url(https://i2-prod.football.london/incoming/article18882096.ece/ALTERNATES/s615/0_GettyImages-1266331344.jpg)`}}><div className=\"caption\">VOTED</div></div>\r\n                            <h4>{el.name}</h4>\r\n                            <p>{el.team}</p>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <AnimatePresence>\r\n                {error &&\r\n                    <motion.div initial={{opacity:0}} animate={{opacity:1, transition: {duration: 0.3}}} exit={{opacity:0}} id=\"dialog\">\r\n                        <div className=\"content\">\r\n                            <h4>{error}</h4>\r\n                            {anonymous && <div className=\"fb-con\" onClick={click}><FaFacebookF className=\"f\"/><p>Continue with Facebook</p></div>}\r\n                            {!anonymous && <div className=\"fb-con\"><FaFacebookF className=\"f\"/><p>Logged in as {senderName}</p></div>}\r\n                            <AiOutlineClose className=\"x\" onClick={()=>setError('')}/>\r\n                        </div>\r\n                    </motion.div>\r\n                }\r\n            </AnimatePresence>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Main;\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    #dialog{\r\n        display:flex;\r\n        justify-content:center;\r\n        align-items:center;\r\n        position:absolute;\r\n        top:0;\r\n        left:0;\r\n        right:0;\r\n        bottom:0;\r\n        background:rgba(0,0,0,0.6);\r\n        .content{\r\n            position:relative;\r\n            padding:60px 5vw;\r\n            background:white;\r\n            max-width:100vw;\r\n            .fb-con{\r\n                max-width:100%;\r\n                background: rgb(59,89,152);\r\n                color: white;\r\n                padding: 10px 15px;\r\n                position: relative;\r\n                text-align: center;\r\n                margin-top:20px;\r\n                p{\r\n                    margin:0px;\r\n                    margin-left:25px;\r\n                }\r\n                .f{\r\n                    position: absolute;\r\n                    left: 15px;\r\n                    font-size:18px;\r\n                }\r\n                &:hover{\r\n                    cursor:pointer;\r\n                }\r\n            }\r\n            h4{\r\n                margin:0px;\r\n                text-align:center;\r\n            }\r\n            .x{\r\n                position:absolute;\r\n                top:15px;\r\n                right:15px;\r\n                font-size:24px;\r\n                &:hover{\r\n                    cursor:pointer;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .top {\r\n        width: 100%;\r\n        height: 80px;\r\n        background: rgba(0, 0, 0, 0.1);\r\n    }\r\n    .body {\r\n    }\r\n    .bottom {\r\n        width: 100%;\r\n        padding: 25px;\r\n        box-sizing: border-box;\r\n        overflow-x: scroll;\r\n        white-space: nowrap;\r\n        text-align: center;\r\n        border-top:1px solid rgba(0,0,0,0.2);\r\n        .prt {\r\n            display: inline-block;\r\n            margin-right: 30px;\r\n            position:relative;\r\n            &:hover{\r\n                cursor:pointer;\r\n                .img{\r\n                    opacity:0.7;\r\n                }\r\n            }\r\n            &:last-child {\r\n                margin-right: 0px;\r\n            }\r\n            .img {\r\n                width: 100px;\r\n                height: 100px;\r\n                background-size:cover;\r\n                background-position:center center;\r\n                border-radius: 100%;\r\n                box-sizing:border-box;\r\n                border:3px solid #002ebf;\r\n                .caption{\r\n                    line-height:100px;\r\n                    width:100%;\r\n                    height:100%;\r\n                    font-weight:bold;\r\n                    border-radius:100%;\r\n                    color:#002ebf;\r\n                    display:none;\r\n                }\r\n            }\r\n            h4 {\r\n                margin-bottom: 0px;\r\n                margin-top: 10px;\r\n            }\r\n            p {\r\n                margin-top: 4px;\r\n                margin-bottom: 0px;\r\n            }\r\n        }\r\n        .prt.voted {\r\n            .img{\r\n                border:3px solid red;\r\n                .caption{\r\n                    background:rgba(255,255,255,0.5);\r\n                    display:block;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .bottom::-webkit-scrollbar {\r\n        height:8px;\r\n    }\r\n    \r\n    .bottom::-webkit-scrollbar-track {\r\n        box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    }\r\n    \r\n    .bottom::-webkit-scrollbar-thumb {\r\n        background-color: rgb(0,46,191,0.6);\r\n        border-radius: 10px;\r\n    }\r\n    .bottom:hover::-webkit-scrollbar-thumb{\r\n        background-color: #002ebf;\r\n    }\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\nimport axios from 'axios'\nimport Main from \"./Main\";\n\nfunction App() {\n\n    const [token, setToken] = useState(null);\n    const [id, setId] = useState(null);\n    const [name, setName] = useState(null);\n    const [participants, setParticipants] = useState([]);\n    const [alreadyVoted, setAlreadyVoted] = useState('');\n    const [loaded, setLoaded] = useState(false);\n    const [anonymous, setAnonymous] = useState(false);\n\n    const loginWithFacebook = () => {\n        if(window.FB){\n        window.FB.login((response) => {\n            if(!response || !response.authResponse) return document.location.reload();\n            const {authResponse:{accessToken, userID}} = response\n            localStorage.setItem('acto', accessToken);\n            localStorage.setItem('usid', userID);\n            axios.post('/login-with-facebook', {accessToken, userID}).then((res)=>{\n                if(res.status !== 200) return window.alert('Нэвтрэхэд алдаа гарлаа!');\n                accessToken && setToken(accessToken);\n                userID && setId(userID);\n                res.data.person.name && setName(res.data.person.name)\n                res.data.participants && setParticipants(res.data.participants)\n                res.data.person.voted && setAlreadyVoted(res.data.person.voted);\n                setLoaded(true);\n                setLoaded(false);\n                setLoaded(true);\n                setAnonymous(null);\n                // document.location.reload();\n            }).catch((err)=>{\n                localStorage.removeItem(\"acto\");\n                localStorage.removeItem(\"usid\");\n                document.location.reload();\n            });\n        },{scope: 'public_profile,email'});\n        }\n        else{\n            document.location.reload();\n        }\n    };\n\n    useEffect(()=>{\n        if(localStorage.getItem('acto') && localStorage.getItem('usid')){\n            const accessToken = localStorage.getItem('acto');\n            const userID = localStorage.getItem('usid');\n            axios.post('/login-with-facebook', {accessToken, userID}).then((res)=>{\n                if(res.status !== 200) return window.alert('Нэвтрэхэд алдаа гарлаа!');\n                accessToken && setToken(accessToken);\n                userID && setId(userID);\n                res.data.person.name && setName(res.data.person.name)\n                res.data.participants && setParticipants(res.data.participants)\n                res.data.person.voted && setAlreadyVoted(res.data.person.voted);\n                setLoaded(true);\n            }).catch((err)=>{\n                localStorage.removeItem(\"acto\");\n                localStorage.removeItem(\"usid\");\n                document.location.reload();\n            });\n        }\n        else{\n            const go = async () => {\n                let res = await axios('/get-info');\n                setParticipants(res.data.participants);\n                setAnonymous(true)\n                setLoaded(true);\n            }\n            go();\n        }\n    },[])\n\n    return (\n        <div className=\"App\">\n            {loaded ? <Main click={loginWithFacebook} alreadyVoted={alreadyVoted} anonymous={anonymous} senderName={name} participants={participants} facebook={id}/> : 'Loading'}\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}