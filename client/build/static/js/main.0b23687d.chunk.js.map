{"version":3,"sources":["Main.js","App.js","index.js"],"names":["Main","participants","facebook","senderName","alreadyVoted","anonymous","click","useState","already","setAlready","error","setError","handler","requestingPlayerName","a","Axios","post","sender","then","res","data","voted","catch","useEffect","width","window","innerWidth","height","innerHeight","top","document","querySelector","offsetHeight","bot","final","console","log","style","boxSizing","paddingTop","paddingBottom","Container","className","backgroundImage","src","textAlign","color","margin","padding","overflow","frameBorder","map","el","i","name","key","onClick","img","team","div","initial","opacity","animate","transition","duration","exit","id","styled","App","setToken","setId","setName","setParticipants","setAlreadyVoted","loaded","setLoaded","setAnonymous","location","href","includes","localStorage","getItem","accessToken","userID","axios","status","alert","person","err","removeItem","reload","go","FB","login","response","authResponse","setItem","scope","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0b23687d.chunk.js","sourcesContent":["import Axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {AnimatePresence, motion} from 'framer-motion';\r\nimport {FaFacebookF} from 'react-icons/fa'\r\nimport {AiOutlineClose} from 'react-icons/ai'\r\n\r\nconst Main = ({ participants, facebook, senderName, alreadyVoted, anonymous, click }) => {\r\n\r\n    const [already, setAlready] = useState(alreadyVoted);\r\n    const [error, setError] = useState('')\r\n\r\n    const handler = async (requestingPlayerName) => {\r\n        if(facebook, senderName && !anonymous){\r\n            Axios.post('/vote', {requestingPlayerName, facebook, sender: senderName})\r\n                .then((res)=>{\r\n                    setError('Амжилттай саналаа өглөө!');\r\n                    setAlready(res.data.voted);\r\n                })\r\n                .catch(()=>setError('Дахин санал өгөх боломжгүй!'))\r\n        }\r\n        else{\r\n            setError('Саналаа өгөхийн тулд нэвтрэх шаардлагатай!');\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        let width = window.innerWidth\r\n        let height = window.innerHeight\r\n        let top = document.querySelector('.top').offsetHeight;\r\n        let bot = document.querySelector('.bottom').offsetHeight;\r\n        let final = height - top - bot;\r\n        console.log(width, height,'width', top, bot, final);\r\n        document.querySelector('iframe').style.width = width + 'px';\r\n        document.querySelector('iframe').style.height = final + 'px';\r\n        document.querySelector('iframe').style.boxSizing = 'border-box';\r\n        document.querySelector('iframe').style.paddingTop = '50px';\r\n        document.querySelector('iframe').style.paddingBottom = '50px';\r\n        \r\n    },[])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <div className=\"top\" style={{backgroundImage: `linear-gradient(45deg, #002ebf, #2891eb)`}}>\r\n                <img src={'https://i.imgur.com/t9rOsAW.png'} />\r\n                <h2 style={{textAlign:'center',color:'white'}}>Үндэсний дээд лиг 2020 улиралын шилдэг гоолын санал авах хуудас</h2>\r\n                <img src={'https://i.imgur.com/uHawS7U.png'} />\r\n            </div>\r\n            <div className=\"body\">\r\n                <div style={{margin:'0px', padding:'0px', overflow: 'hidden'}}>\r\n                    <iframe src=\"https://www.youtube.com/embed/Nbst6fgBkUw\" frameBorder={0} style={{overflow: 'hidden', height: '100%', width: '100%'}} height=\"100%\" width=\"100%\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"bottom\" >\r\n                {participants.map((el, i) => {\r\n                    return (\r\n                        <div className={`prt ${already === el.name && 'voted'}`} key={i + \"p\"} onClick={()=>handler(el.name)}>\r\n                            <div className=\"img\" style={{backgroundImage:`url(${el.img})`}}><div className=\"caption\">VOTED</div></div>\r\n                            <h4>{el.name}</h4>\r\n                            <p>{el.team}</p>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <AnimatePresence>\r\n                {error &&\r\n                    <motion.div initial={{opacity:0}} animate={{opacity:1, transition: {duration: 0.3}}} exit={{opacity:0}} id=\"dialog\">\r\n                        <div className=\"content\">\r\n                            <h4>{error}</h4>\r\n                            {anonymous && <div className=\"fb-con\" onClick={click}><FaFacebookF className=\"f\"/><p>Continue with Facebook</p></div>}\r\n                            {!anonymous && <div className=\"fb-con\"><FaFacebookF className=\"f\"/><p>Logged in as {senderName}</p></div>}\r\n                            <AiOutlineClose className=\"x\" onClick={()=>setError('')}/>\r\n                        </div>\r\n                    </motion.div>\r\n                }\r\n            </AnimatePresence>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Main;\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    #dialog{\r\n        display:flex;\r\n        justify-content:center;\r\n        align-items:center;\r\n        position:absolute;\r\n        top:0;\r\n        left:0;\r\n        right:0;\r\n        bottom:0;\r\n        background:rgba(0,0,0,0.6);\r\n        .content{\r\n            position:relative;\r\n            padding:60px 5vw;\r\n            background:white;\r\n            max-width:100vw;\r\n            .fb-con{\r\n                max-width:100%;\r\n                background: rgb(59,89,152);\r\n                color: white;\r\n                padding: 10px 15px;\r\n                position: relative;\r\n                text-align: center;\r\n                margin-top:20px;\r\n                p{\r\n                    margin:0px;\r\n                    margin-left:25px;\r\n                }\r\n                .f{\r\n                    position: absolute;\r\n                    left: 15px;\r\n                    font-size:18px;\r\n                }\r\n                &:hover{\r\n                    cursor:pointer;\r\n                }\r\n            }\r\n            h4{\r\n                margin:0px;\r\n                text-align:center;\r\n            }\r\n            .x{\r\n                position:absolute;\r\n                top:15px;\r\n                right:15px;\r\n                font-size:24px;\r\n                &:hover{\r\n                    cursor:pointer;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .top {\r\n        width: 100%;\r\n        background: rgba(0, 0, 0, 0.1);\r\n        display:flex;\r\n        justify-content: center;\r\n        align-items:center;\r\n        img{\r\n            height:50px;\r\n            margin:0px 15px;\r\n            \r\n        }\r\n    }\r\n    .body {\r\n    }\r\n    .bottom {\r\n        width: 100%;\r\n        padding: 25px;\r\n        box-sizing: border-box;\r\n        overflow-x: scroll;\r\n        overflow-y: hidden;\r\n        white-space: nowrap;\r\n        text-align: center;\r\n        border-top:1px solid rgba(0,0,0,0.2);\r\n        ${'' /* color:white; */}\r\n        .prt {\r\n            display: inline-block;\r\n            margin-right: 30px;\r\n            position:relative;\r\n            &:hover{\r\n                cursor:pointer;\r\n                .img{\r\n                    opacity:0.7;\r\n                }\r\n            }\r\n            &:last-child {\r\n                margin-right: 0px;\r\n            }\r\n            .img {\r\n                width: 100px;\r\n                height: 100px;\r\n                background-size:cover;\r\n                background-position:center center;\r\n                border-radius: 100%;\r\n                box-sizing:border-box;\r\n                border:3px solid #002ebf;\r\n                margin:0px auto;\r\n                .caption{\r\n                    line-height:100px;\r\n                    width:100%;\r\n                    height:100%;\r\n                    font-weight:bold;\r\n                    border-radius:100%;\r\n                    color:#002ebf;\r\n                    display:none;\r\n                }\r\n            }\r\n            h4 {\r\n                margin-bottom: 0px;\r\n                margin-top: 10px;\r\n            }\r\n            p {\r\n                margin-top: 4px;\r\n                margin-bottom: 0px;\r\n            }\r\n        }\r\n        .prt.voted {\r\n            .img{\r\n                border:3px solid red;\r\n                .caption{\r\n                    background:rgba(255,255,255,0.5);\r\n                    display:block;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .bottom::-webkit-scrollbar {\r\n        height:8px;\r\n    }\r\n    \r\n    .bottom::-webkit-scrollbar-track {\r\n        box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    }\r\n    \r\n    .bottom::-webkit-scrollbar-thumb {\r\n        background-color: rgb(0,46,191,0.6);\r\n        border-radius: 10px;\r\n    }\r\n    .bottom:hover::-webkit-scrollbar-thumb{\r\n        background-color: #002ebf;\r\n    }\r\n    @media only screen and (max-width: 768px){\r\n        h2{\r\n            font-size:16px;\r\n        }\r\n        .top{\r\n            img{\r\n                height:30px;\r\n            }\r\n        }\r\n    }\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\nimport axios from 'axios'\nimport Main from \"./Main\";\n\nfunction App() {\n\n    const [token, setToken] = useState(null);\n    const [id, setId] = useState(null);\n    const [name, setName] = useState(null);\n    const [participants, setParticipants] = useState([]);\n    const [alreadyVoted, setAlreadyVoted] = useState('');\n    const [loaded, setLoaded] = useState(false);\n    const [anonymous, setAnonymous] = useState(false);\n\n    const loginWithFacebook = () => {\n        if(window.FB){\n        window.FB.login((response) => {\n            if(!response || !response.authResponse) return document.location.reload();\n            const {authResponse:{accessToken, userID}} = response\n            localStorage.setItem('acto', accessToken);\n            localStorage.setItem('usid', userID);\n            axios.post('/login-with-facebook', {accessToken, userID}).then((res)=>{\n                if(res.status !== 200) return window.alert('Нэвтрэхэд алдаа гарлаа!');\n                accessToken && setToken(accessToken);\n                userID && setId(userID);\n                res.data.person.name && setName(res.data.person.name)\n                res.data.participants && setParticipants(res.data.participants)\n                res.data.person.voted && setAlreadyVoted(res.data.person.voted);\n                setLoaded(true);\n                setLoaded(false);\n                setLoaded(true);\n                setAnonymous(null);\n                // document.location.reload();\n            }).catch((err)=>{\n                localStorage.removeItem(\"acto\");\n                localStorage.removeItem(\"usid\");\n                document.location.reload();\n            });\n        },{scope: 'public_profile,email'});\n        }\n        else{\n            document.location.reload();\n        }\n    };\n\n    useEffect(()=>{\n        if(!window.location.href.includes('https')){\n            window.location.href = \"https://vote-mn.herokuapp.com/\";\n        }\n        if(localStorage.getItem('acto') && localStorage.getItem('usid')){\n            const accessToken = localStorage.getItem('acto');\n            const userID = localStorage.getItem('usid');\n            axios.post('/login-with-facebook', {accessToken, userID}).then((res)=>{\n                if(res.status !== 200) return window.alert('Нэвтрэхэд алдаа гарлаа!');\n                accessToken && setToken(accessToken);\n                userID && setId(userID);\n                res.data.person.name && setName(res.data.person.name)\n                res.data.participants && setParticipants(res.data.participants)\n                res.data.person.voted && setAlreadyVoted(res.data.person.voted);\n                setLoaded(true);\n            }).catch((err)=>{\n                localStorage.removeItem(\"acto\");\n                localStorage.removeItem(\"usid\");\n                document.location.reload();\n            });\n        }\n        else{\n            const go = async () => {\n                let res = await axios('/get-info');\n                setParticipants(res.data.participants);\n                setAnonymous(true)\n                setLoaded(true);\n            }\n            go();\n        }\n    },[])\n\n    return (\n        <div className=\"App\">\n            {loaded ? <Main click={loginWithFacebook} alreadyVoted={alreadyVoted} anonymous={anonymous} senderName={name} participants={participants} facebook={id}/> : 'Loading'}\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}